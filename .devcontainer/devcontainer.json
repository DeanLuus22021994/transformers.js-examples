{
	"name": "Transformers.js Development",
	"dockerComposeFile": "docker-compose.yml",
	"service": "dev",
	"workspaceFolder": "/workspace",
	"customizations": {
		"vscode": {
			"extensions": [
				"ms-vscode.vscode-node-azure-pack",
				"ms-azuretools.vscode-azurefunctions",
				"ms-azuretools.vscode-azureresourcegroups",
				"ms-azuretools.vscode-azurestorage",
				"ms-azuretools.vscode-cosmosdb",
				"ms-azuretools.azure-dev",
				"ms-python.python",
				"ms-python.vscode-pylance",
				"dbaeumer.vscode-eslint",
				"esbenp.prettier-vscode",
				"github.copilot",
				"github.copilot-chat",
				"davidanson.vscode-markdownlint",
				"bierner.markdown-preview-github-styles",
				"bierner.markdown-mermaid",
				"ms-vsliveshare.vsliveshare",
				"streetsidesoftware.code-spell-checker",
				"ms-azuretools.vscode-docker",
				"GitHub.vscode-github-actions"
			],
			"settings": {
				"editor.formatOnSave": true,
				"editor.codeActionsOnSave": {
					"source.fixAll.eslint": "explicit"
				},
				"files.trimTrailingWhitespace": true,
				"azure.resourceFilter": [
					"tag.environment=development"
				],
				"terminal.integrated.env.linux": {
					"NODE_ENV": "development"
				},
				"javascript.updateImportsOnFileMove.enabled": "always"
			}
		}
	},
	"remoteUser": "node",
	"remoteEnv": {
		"PATH": "${containerEnv:PATH}:/home/node/.azure/bin",
		"AZURE_SUBSCRIPTION_ID": "${localEnv:AZURE_SUBSCRIPTION_ID}",
		"AZURE_TENANT_ID": "${localEnv:AZURE_TENANT_ID}",
		"NODE_ENV": "development"
	},
	"forwardPorts": [
		3000,
		8080,
		5173
	],
	"postCreateCommand": "bash ./.github/scripts/setup-debt-scanner.sh",
	// Fixed: Change postStartCommand to run init first if setup isn't complete, then check readiness
	"postStartCommand": "if [ ! -f \".devcontainer/.setup-complete\" ]; then bash .devcontainer/scripts/setup/init.sh; fi && bash .devcontainer/scripts/checks/readiness.sh && bash .devcontainer/scripts/precompile/trigger.sh",
	"features": {
		"ghcr.io/devcontainers/features/azure-cli:1": {},
		"ghcr.io/devcontainers/features/github-cli:1": {},
		"ghcr.io/devcontainers/features/node:1": {
			"version": "18"
		}
	}
}